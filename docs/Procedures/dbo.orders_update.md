[Start](../start.md)>[Procedures](Procedures.md)>dbo.orders_update


# ![logo](../Images/procedure.svg) dbo.orders_update

## <a name="#Description"></a>Description
> Merge Order lines from tmp_tbl generated by api call
## <a name="#SqlScript"></a>SQL Script
```SQL
SET QUOTED_IDENTIFIER, ANSI_NULLS ON
GO
-- =============================================
-- Author:	Joseph Trabulsy
-- Description:	Merge Order lines from tmp_tbl
-- =============================================
CREATE OR ALTER PROCEDURE dbo.orders_update 

AS
BEGIN
	SET NOCOUNT ON;

	INSERT INTO dbo.Orders 	(
	   id
	  ,order_date
      ,number
      ,total_price
      ,subtotal_price
      ,total_weight
      ,total_tax
      ,total_discounts
      ,total_line_items_price
      ,name
      ,total_price_usd
      ,order_number
      ,processing_method
      ,source_name
      ,fulfillment_status
      ,payment_gateway_names)
	  
	  SELECT tmp.id
      ,tmp.order_date
      ,tmp.number
      ,tmp.total_price
      ,tmp.subtotal_price
      ,tmp.total_weight
      ,tmp.total_tax
      ,tmp.total_discounts
      ,tmp.total_line_items_price
      ,tmp.name
      ,tmp.total_price_usd
      ,tmp.order_number
      ,tmp.processing_method
      ,tmp.source_name
      ,tmp.fulfillment_status
      ,tmp.payment_gateway_names

	  FROM tmp_tbl tmp
	  WHERE tmp.id NOT IN (SELECT id FROM dbo.Orders)
	  DROP TABLE dbo.tmp_tbl
END
GO
```

___