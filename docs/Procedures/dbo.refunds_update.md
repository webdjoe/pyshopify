[Start](../start.md)>[Procedures](Procedures.md)>dbo.refunds_update

# ![logo](../Images/procedure.svg) dbo.refunds_update

## <a name="#Description"></a>Description
> Merge Refunds with tmp_tbl generated by api call
## <a name="#SqlScript"></a>SQL Script
```SQL
SET QUOTED_IDENTIFIER, ANSI_NULLS ON
GO
-- =============================================
-- Author:	Joseph Trabulsy
-- Description:	Merge Refunds table with tmp_tbl
-- =============================================
CREATE OR ALTER PROCEDURE dbo.refunds_update 

AS
BEGIN
	SET NOCOUNT ON;
	INSERT INTO dbo.Refunds 	(
	   id, refund_date, order_id)
	  
	  SELECT tmp.id, tmp.refund_date, tmp.order_id

	  FROM tmp_tbl tmp
	  WHERE tmp.id NOT IN (SELECT id FROM dbo.Refunds)
	  DROP TABLE dbo.tmp_tbl
END
GO
```

___